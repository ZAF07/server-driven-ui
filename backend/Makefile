CLIENTID=0

generate_wire:
	@echo "~~~ Running wire from: $(pwd) ~~~"
	@rm -rf injection/wire_gen.go
	@wire ./injection

start-server:
	@echo "ğŸğŸ Starting server ğŸğŸ"	
	@go build -o sdui-backend
	@./sdui-backend

# Starts both FE & BE (This shows debug console for FE only, not recommended) 
start-frontend:
	@echo "ğŸğŸ Starting Service ğŸğŸ"
	@cd ../frontend/sui && npm start

start-client: 
	@echo "ğŸğŸ Starting frontend application ğŸğŸ"
	@cd ../frontend/sui && pm2 start npm -- start

stop-client:
	@echo "Stopping cient âœ‹âœ‹"	
	@pm2 stop $(CLIENTID)
	@echo " ~~~ Client with ID '$(CLIENTID)' has been stopped ğŸ›‘"

get-running-client-id:
	@pm2 ps

get-client-logs:
	@pm2 logs

start: start-client start-server
# NOT RECOMMENDED (Only shows FE debug console)
start-all: start-frontend start-server

generate-proto:
	@echo "ğŸ—‘ Cleaning generated proto ~~"
	@rm -rf ./proto/structures/*
	@echo "ğŸ“‚ Generating protobuf ~~ "
	@protoc -I=. --go_out=./proto/structures ./proto/button_component.proto
	@echo "Done ğŸ‘"

clean:
	@echo "ğŸ§¼ğŸ§¼ğŸ§¼ Cleaning started ğŸ§¼ğŸ§¼ğŸ§¼"
	@rm -rf ./sdui-backend
	@echo "Cleaning done ğŸ‘"